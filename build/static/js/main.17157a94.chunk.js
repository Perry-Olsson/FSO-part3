(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(14),u=t.n(c),o=(t(20),t(1)),l=t(3),m=function(e){var n=e.person,t=e.deletePerson;return a.a.createElement("div",null,n.name,a.a.createElement("span",null,n.number," ",a.a.createElement("button",{onClick:t},"delete")))},s=function(e){var n=e.persons,t=e.deletePerson;return a.a.createElement(a.a.Fragment,null,n.map((function(e){return a.a.createElement(m,{deletePerson:function(){return t(e.id,e.name)},key:e.id,person:e})})))},i=function(e){var n=e.addPerson,t=e.setNewName,r=e.setNewNumber,c=e.newName,u=e.newNumber;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{value:c,onChange:function(e){return t(e.target.value)},required:!0})),a.a.createElement("br",null),a.a.createElement("div",null,"number:"," ",a.a.createElement("input",{value:u,onChange:function(e){return r(e.target.value)},required:!0})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},f=function(e){var n=e.search,t=e.setSearch;return a.a.createElement("div",null,"search:"," ",a.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value)}}))},d=(t(21),function(e){var n=e.message,t=void 0===n?null:n,r=e.type;return null===t?null:a.a.createElement("div",{className:"".concat(r," notification")},t)}),b=function(e,n,t,r){var a={formatOk:!0,error:"",handleError:"",name:"",number:""};return null!==e.match(/[^\d-()]/gm)?(a.formatOk=!1,a.handleError=function(e){e({message:"Number must only contain characters 0-9()-",type:"error"}),setTimeout((function(){e({message:null,type:"success"})}),1e4)},a.error="number",a):(t.forEach((function(t){return t.name.toLowerCase()===n.toLowerCase()?(a.formatOk=!1,a.handleError=function(){if(window.confirm("".concat(n," is already in the phonebook, would you like to replace the old number?"))){var a=Object(o.a)(Object(o.a)({},t),{},{number:e});r(t.id,a)}},a.error="name",a):t.number.replace(/[()-]/gm,"")===e.replace(/[()-]/gm,"")?(a.formatOk=!1,a.handleError=function(n){n({messgae:"".concat(e," is already in the phonebook"),type:"error"}),setTimeout((function(){return n({message:null,type:"success"})}),5e3)},a.error="number",a):void 0})),a.name=n.trim(),a.number=e.replace(/\s/gm,""),a)},h=t(4),p=t.n(h),E="/api/persons",g=function(){return p.a.get(E).then((function(e){return e.data}))},v=function(e){return p.a.post(E,e).then((function(e){return e.data}))},O=function(e,n){return p.a.put("".concat(E,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return p.a.delete("".concat(E,"/").concat(e)).then((function(e){return e}))},w=function(e,n){var t=new RegExp(e.trim(),"i");return n.filter((function(e){return null!==e.name.match(t)}))},y=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)(""),m=Object(l.a)(u,2),h=m[0],p=m[1],E=Object(r.useState)(""),y=Object(l.a)(E,2),k=y[0],N=y[1],S=Object(r.useState)(""),P=Object(l.a)(S,2),T=P[0],C=P[1],q=Object(r.useState)({message:null,type:"success"}),x=Object(l.a)(q,2),A=x[0],D=x[1];Object(r.useEffect)((function(){g().then((function(e){return c(e)}))}),[]);var F=function(e,n){O(e,n).then((function(r){c(t.map((function(n){return n.id!==e?n:r}))),N(""),D(Object(o.a)(Object(o.a)({},A),{},{message:"Updated ".concat(n.name)})),setTimeout((function(){return D(Object(o.a)(Object(o.a)({},A),{},{message:null}))}),5e3)})).catch((function(){c(t.filter((function(n){return n.id!==e}))),N(""),D({message:"".concat(n.name,"'s information was not found on the server"),type:"error"}),setTimeout((function(){return D({type:"success",message:null})}),5e3)}))};return a.a.createElement("div",null,a.a.createElement("h1",null,"Phonebook"),a.a.createElement(d,{message:A.message,type:A.type}),a.a.createElement(f,{search:T,setSearch:C}),a.a.createElement("h2",null,"Add a new"),a.a.createElement(i,{addPerson:function(e){e.preventDefault();var n=b(k,h,t,F);if(n.formatOk){var r={id:t[t.length-1].id+1,name:n.name,number:n.number};v(r).then((function(e){c(t.concat(e)),p(""),N(""),D(Object(o.a)(Object(o.a)({},A),{},{message:"Added ".concat(e.name)})),setTimeout((function(){return D(Object(o.a)(Object(o.a)({},A),{},{message:null}))}),5e3)}))}else"number"===n.error?N(""):p(""),n.handleError(D)},setNewName:p,setNewNumber:N,newName:h,newNumber:k}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(s,{deletePerson:function(e,n){window.confirm("delete ".concat(n,"?"))&&j(e).then((function(){c(t.filter((function(n){return n.id!==e}))),D(Object(o.a)(Object(o.a)({},A),{},{message:"Deleted ".concat(n)})),setTimeout((function(){D(Object(o.a)(Object(o.a)({},A),{},{message:null}))}),5e3)})).catch((function(){D({message:"".concat(n," has already been deleted"),type:"error"}),setTimeout((function(){return D({type:"success",message:null})}),5e3)}))},persons:w(T,t)}))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.17157a94.chunk.js.map