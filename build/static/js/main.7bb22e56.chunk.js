(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),u=n.n(c),o=(n(20),n(1)),l=n(3),m=function(e){var t=e.person,n=e.deletePerson;return a.a.createElement("div",null,t.name,a.a.createElement("span",null,t.number," ",a.a.createElement("button",{onClick:n},"delete")))},s=function(e){var t=e.persons,n=e.deletePerson;return a.a.createElement(a.a.Fragment,null,t.map((function(e){return a.a.createElement(m,{deletePerson:function(){return n(e.id,e.name)},key:e.id,person:e})})))},i=function(e){var t=e.addPerson,n=e.setNewName,r=e.setNewNumber,c=e.newName,u=e.newNumber;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{value:c,onChange:function(e){return n(e.target.value)},required:!0})),a.a.createElement("br",null),a.a.createElement("div",null,"number:"," ",a.a.createElement("input",{value:u,onChange:function(e){return r(e.target.value)},required:!0})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},f=function(e){var t=e.search,n=e.setSearch;return a.a.createElement("div",null,"search:"," ",a.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},d=(n(21),function(e){var t=e.message,n=void 0===t?null:t,r=e.type;return null===n?null:a.a.createElement("div",{className:"".concat(r," notification")},n)}),b=function(e,t,n,r){var a={formatOk:!0,error:"",handleError:"",name:"",number:""};return null!==e.match(/[^\d-()]/gm)?(a.formatOk=!1,a.handleError=function(e){e({message:"Number must only contain characters 0-9()-",type:"error"}),setTimeout((function(){e({message:null,type:"success"})}),1e4)},a.error="number",a):(n.forEach((function(n){return n.name.toLowerCase()===t.toLowerCase()?(a.formatOk=!1,a.handleError=function(){if(window.confirm("".concat(t," is already in the phonebook, would you like to replace the old number?"))){var a=Object(o.a)(Object(o.a)({},n),{},{number:e});r(n.id,a)}},a.error="name",a):n.number.replace(/[()-]/gm,"")===e.replace(/[()-]/gm,"")?(a.formatOk=!1,a.handleError=function(t){t({messgae:"".concat(e," is already in the phonebook"),type:"error"}),setTimeout((function(){return t({message:null,type:"success"})}),5e3)},a.error="number",a):void 0})),a.name=t.trim(),a.number=e.replace(/\s/gm,""),a)},h=n(4),p=n.n(h),E="https://agile-coast-89404.herokuapp.com/api/persons",g=function(){return p.a.get(E).then((function(e){return e.data}))},v=function(e){return p.a.post(E,e).then((function(e){return e.data}))},O=function(e,t){return p.a.put("".concat(E,"/").concat(e),t).then((function(e){return e.data}))},j=function(e){return p.a.delete("".concat(E,"/").concat(e)).then((function(e){return e}))},w=function(e,t){var n=new RegExp(e.trim(),"i");return t.filter((function(e){return null!==e.name.match(n)}))},y=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),m=Object(l.a)(u,2),h=m[0],p=m[1],E=Object(r.useState)(""),y=Object(l.a)(E,2),k=y[0],N=y[1],S=Object(r.useState)(""),P=Object(l.a)(S,2),T=P[0],C=P[1],q=Object(r.useState)({message:null,type:"success"}),x=Object(l.a)(q,2),A=x[0],D=x[1];Object(r.useEffect)((function(){g().then((function(e){return c(e)}))}),[]);var F=function(e,t){O(e,t).then((function(r){c(n.map((function(t){return t.id!==e?t:r}))),N(""),D(Object(o.a)(Object(o.a)({},A),{},{message:"Updated ".concat(t.name)})),setTimeout((function(){return D(Object(o.a)(Object(o.a)({},A),{},{message:null}))}),5e3)})).catch((function(){c(n.filter((function(t){return t.id!==e}))),N(""),D({message:"".concat(t.name,"'s information was not found on the server"),type:"error"}),setTimeout((function(){return D({type:"success",message:null})}),5e3)}))};return a.a.createElement("div",null,a.a.createElement("h1",null,"Phonebook"),a.a.createElement(d,{message:A.message,type:A.type}),a.a.createElement(f,{search:T,setSearch:C}),a.a.createElement("h2",null,"Add a new"),a.a.createElement(i,{addPerson:function(e){e.preventDefault();var t=b(k,h,n,F);if(t.formatOk){var r={id:n[n.length-1].id+1,name:t.name,number:t.number};v(r).then((function(e){c(n.concat(e)),p(""),N(""),D(Object(o.a)(Object(o.a)({},A),{},{message:"Added ".concat(e.name)})),setTimeout((function(){return D(Object(o.a)(Object(o.a)({},A),{},{message:null}))}),5e3)}))}else"number"===t.error?N(""):p(""),t.handleError(D)},setNewName:p,setNewNumber:N,newName:h,newNumber:k}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(s,{deletePerson:function(e,t){window.confirm("delete ".concat(t,"?"))&&j(e).then((function(){c(n.filter((function(t){return t.id!==e}))),D(Object(o.a)(Object(o.a)({},A),{},{message:"Deleted ".concat(t)})),setTimeout((function(){D(Object(o.a)(Object(o.a)({},A),{},{message:null}))}),5e3)})).catch((function(){D({message:"".concat(t," has already been deleted"),type:"error"}),setTimeout((function(){return D({type:"success",message:null})}),5e3)}))},persons:w(T,n)}))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7bb22e56.chunk.js.map