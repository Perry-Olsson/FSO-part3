(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{17:function(e,t,n){e.exports=n(42)},22:function(e,t,n){},23:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),u=n.n(c),o=(n(22),n(1)),s=n(4),l=function(e){var t=e.person,n=e.deletePerson;return a.a.createElement("div",null,t.name,a.a.createElement("span",null,t.number," ",a.a.createElement("button",{onClick:n},"delete")))},i=function(e){var t=e.persons,n=e.deletePerson;return a.a.createElement(a.a.Fragment,null,t.map((function(e){return a.a.createElement(l,{deletePerson:function(){return n(e.id,e.name)},key:e.id,person:e})})))},m=function(e){var t=e.addPerson,n=e.setNewName,r=e.setNewNumber,c=e.newName,u=e.newNumber;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{value:c,onChange:function(e){return n(e.target.value)},required:!0})),a.a.createElement("br",null),a.a.createElement("div",null,"number:"," ",a.a.createElement("input",{value:u,onChange:function(e){return r(e.target.value)},required:!0})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},f=function(e){var t=e.search,n=e.setSearch;return a.a.createElement("div",null,"search:"," ",a.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},p=(n(23),function(e){var t=e.message,n=void 0===t?null:t,r=e.type;return null===n?null:a.a.createElement("div",{className:"".concat(r," notification")},n)}),d=function(e,t,n,r){var a={formatOk:!0,error:"",handleError:"",name:"",number:""};return null!==e.match(/[^\d-()]/gm)?(a.formatOk=!1,a.handleError=function(e){e({message:"Number must only contain characters 0-9()-",type:"error"}),setTimeout((function(){e({message:null,type:"success"})}),1e4)},a.error="number",a):(n.forEach((function(n){return n.name.toLowerCase()===t.toLowerCase()?(a.formatOk=!1,a.handleError=function(){if(window.confirm("".concat(t," is already in the phonebook, would you like to replace the old number?"))){var a=Object(o.a)(Object(o.a)({},n),{},{number:e});r(n.id,a)}},a.error="name",a):n.number.replace(/[()-]/gm,"")===e.replace(/[()-]/gm,"")?(a.formatOk=!1,a.handleError=function(t){t({message:"".concat(e," is already in the phonebook"),type:"error"}),setTimeout((function(){return t({message:null,type:"success"})}),5e3)},a.error="number",a):void 0})),a.name=t.trim(),a.number=e.replace(/\s/gm,""),a)},b=n(3),h=n.n(b),v=n(5),E=n(6),g=n.n(E),O="/api/persons",j={getAll:function(){var e=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.a.get(O),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createPerson:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.a.post(O,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.a.put("".concat(O,"/").concat(t),n),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.a.delete("".concat(O,"/").concat(t)),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e,t){var n=new RegExp(e.trim(),"i");return t.filter((function(e){return null!==e.name.match(n)}))},y=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),l=Object(s.a)(u,2),b=l[0],h=l[1],v=Object(r.useState)(""),E=Object(s.a)(v,2),g=E[0],O=E[1],y=Object(r.useState)(""),k=Object(s.a)(y,2),N=k[0],P=k[1],x=Object(r.useState)({message:null,type:"success"}),S=Object(s.a)(x,2),T=S[0],C=S[1];Object(r.useEffect)((function(){j.getAll().then((function(e){return c(e)}))}),[]);var A=function(e,t){j.updatePerson(e,t).then((function(r){c(n.map((function(t){return t.id!==e?t:r}))),O(""),C(Object(o.a)(Object(o.a)({},T),{},{message:"Updated ".concat(t.name)})),setTimeout((function(){return C(Object(o.a)(Object(o.a)({},T),{},{message:null}))}),5e3)})).catch((function(){c(n.filter((function(t){return t.id!==e}))),O(""),C({message:"".concat(t.name,"'s information was not found on the server"),type:"error"}),setTimeout((function(){return C({type:"success",message:null})}),5e3)}))};return a.a.createElement("div",null,a.a.createElement("h1",null,"Phonebook"),a.a.createElement(p,{message:T.message,type:T.type}),a.a.createElement(f,{search:N,setSearch:P}),a.a.createElement("h2",null,"Add a new"),a.a.createElement(m,{addPerson:function(e){e.preventDefault();var t=d(g,b,n,A);if(t.formatOk){var r={name:t.name,number:t.number};j.createPerson(r).then((function(e){c(n.concat(e)),h(""),O(""),C(Object(o.a)(Object(o.a)({},T),{},{message:"Added ".concat(e.name)})),setTimeout((function(){return C(Object(o.a)(Object(o.a)({},T),{},{message:null}))}),5e3)}))}else"number"===t.error?O(""):h(""),t.handleError(C)},setNewName:h,setNewNumber:O,newName:b,newNumber:g}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(i,{deletePerson:function(e,t){window.confirm("delete ".concat(t,"?"))&&j.deletePerson(e).then((function(){c(n.filter((function(t){return t.id!==e}))),C(Object(o.a)(Object(o.a)({},T),{},{message:"Deleted ".concat(t)})),setTimeout((function(){C(Object(o.a)(Object(o.a)({},T),{},{message:null}))}),5e3)})).catch((function(){C({message:"".concat(t," has already been deleted"),type:"error"}),setTimeout((function(){return C({type:"success",message:null})}),5e3)}))},persons:w(N,n)}))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.0556b83c.chunk.js.map